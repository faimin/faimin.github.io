
<!DOCTYPE html>
<html lang="zh-cn" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Zero.D.Saber&#39;s Home - 困于心，衡于虑，而后作！</title>

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <meta name="keywords" content="Zero.D.Saber, iOS, Swift, Objective-C,"> 
    <meta name="description" content="记录点滴,UITableView plain样式下，让section跟随滑动123456789101112131415161718192021222324252627// 让section跟随滑动- (voi,"> 
    <meta name="author" content="Zero.D.Saber"> 
    <link rel="alternative" href="atom.xml" title="Zero.D.Saber&#39;s Home" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <link rel="stylesheet" href="/css/diaspora.css">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8691406134231910",
        enable_page_level_ads: true
      });
    </script>

</head>

<body class="loading">
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="icon-home image-icon" href="javascript:;"></a>
    <div title="播放/暂停" class="icon-play"></div>
    <h3 class="subtitle">iOS开发技巧整理</h3>
    <div class="social">
        <!--<div class="like-icon">-->
            <!--<a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
        <!--</div>-->
        <div>
            <div class="share">
                <a title="获取二维码" class="icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>
    <div class="section">
        <div class="article">
    <div class='main'>
        <h1 class="title">iOS开发技巧整理</h1>
        <div class="stuff">
            <span>八月 30, 2018</span>
            
  <ul class="post-tags-list"><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/Tips/">Tips</a></li><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/iOS/">iOS</a></li></ul>


        </div>
        <div class="content markdown">
            <h3 id="UITableView-plain样式下，让section跟随滑动"><a href="#UITableView-plain样式下，让section跟随滑动" class="headerlink" title="UITableView plain样式下，让section跟随滑动"></a>UITableView plain样式下，让section跟随滑动</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 让section跟随滑动</span></span><br><span class="line">- (<span class="keyword">void</span>)scrollViewDidScroll:(<span class="built_in">UIScrollView</span> *)scrollView &#123;</span><br><span class="line"><span class="meta">#if 1</span></span><br><span class="line">    <span class="comment">// 上拉为正数，下拉为负数</span></span><br><span class="line">    <span class="built_in">CGFloat</span> contentOffsetY = scrollView.contentOffset.y;</span><br><span class="line">    <span class="keyword">if</span> (contentOffsetY &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">CGFloat</span> padding = MIN(contentOffsetY, SectionHeight);</span><br><span class="line">        <span class="keyword">self</span>.tableView.contentInset = <span class="built_in">UIEdgeInsetsMake</span>(-padding, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span> (contentOffsetY &gt; <span class="keyword">self</span>.recordContentOffsetY) &#123;   <span class="comment">// 上拉</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;                                              <span class="comment">// 下拉</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">self</span>.recordContentOffsetY = contentOffsetY; <span class="comment">//设置一全局变量，记录滑动偏移量</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#else</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (contentOffsetY &lt;= SectionHeight &amp;&amp; contentOffsetY &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        scrollView.contentInset = <span class="built_in">UIEdgeInsetsMake</span>(-contentOffsetY, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (contentOffsetY &gt;= SectionHeight) &#123;</span><br><span class="line">        scrollView.contentInset = <span class="built_in">UIEdgeInsetsMake</span>(-SectionHeight, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">#endif</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="设置tableViewCell之间的分割线"><a href="#设置tableViewCell之间的分割线" class="headerlink" title="设置tableViewCell之间的分割线"></a>设置tableViewCell之间的分割线</h3><ul>
<li>第一种办法</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置 `tableView`的`separatorInset`</span></span><br><span class="line"><span class="keyword">self</span>.tableView.separatorInset = <span class="built_in">UIEdgeInsetsZero</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 运行程序后还是存在边距,接下来设置cell的属性</span></span><br><span class="line">cell.layoutMargins = <span class="built_in">UIEdgeInsetsZero</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>第二种办法（推荐）</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1、隐藏tableview的分割线</span></span><br><span class="line"><span class="keyword">self</span>.tableView.separatorStyle = <span class="built_in">UITableViewCellSeparatorStyleNone</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2、把分割线的颜色设置为tableview的背景色</span></span><br><span class="line"><span class="keyword">self</span>.tableView.backgroundColor = [<span class="built_in">UIColor</span> redColor];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3、重写cell的setFrame方法</span></span><br><span class="line">- (<span class="keyword">void</span>)setFrame:(<span class="built_in">CGRect</span>)frame &#123;</span><br><span class="line">    frame.size.height -=<span class="number">1</span>;</span><br><span class="line">    [<span class="keyword">super</span> setFrame:frame];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="设置tableViewCell分割线的左右边距"><a href="#设置tableViewCell分割线的左右边距" class="headerlink" title="设置tableViewCell分割线的左右边距"></a>设置<code>tableViewCell</code>分割线的左右边距</h3><p>Refer： <a href="http://itangqi.me/2017/02/28/uitableview-cell-separatorinset/" target="_blank" rel="noopener">http://itangqi.me/2017/02/28/uitableview-cell-separatorinset/</a></p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)tableView:(<span class="built_in">UITableView</span> *)tableView willDisplayCell:(<span class="built_in">UITableViewCell</span> *)cell forRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath &#123;</span><br><span class="line">    <span class="comment">// If cell margins are derived from the width of the readableContentGuide.</span></span><br><span class="line">    <span class="comment">// NS_AVAILABLE_IOS(9_0)，需进行判断</span></span><br><span class="line">    <span class="comment">// 设置为 NO，防止在横屏时留白</span></span><br><span class="line">    <span class="keyword">if</span> ([tableView respondsToSelector:<span class="keyword">@selector</span>(setCellLayoutMarginsFollowReadableWidth:)]) &#123;</span><br><span class="line">        tableView.cellLayoutMarginsFollowReadableWidth = <span class="literal">NO</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Prevent the cell from inheriting the Table View's margin settings.</span></span><br><span class="line">    <span class="comment">// NS_AVAILABLE_IOS(8_0)，需进行判断</span></span><br><span class="line">    <span class="comment">// 阻止 Cell 继承来自 TableView 相关的设置（LayoutMargins or SeparatorInset），设置为 NO 后，Cell 可以独立地设置其自身的分割线边距而不依赖于 TableView</span></span><br><span class="line">    <span class="keyword">if</span> ([cell respondsToSelector:<span class="keyword">@selector</span>(setPreservesSuperviewLayoutMargins:)]) &#123;</span><br><span class="line">        [cell setPreservesSuperviewLayoutMargins:<span class="literal">NO</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Remove seperator inset.</span></span><br><span class="line">    <span class="comment">// NS_AVAILABLE_IOS(8_0)，需进行判断</span></span><br><span class="line">    <span class="comment">// 移除 Cell 的 layoutMargins（即设置为 0）</span></span><br><span class="line">    <span class="keyword">if</span> ([cell respondsToSelector:<span class="keyword">@selector</span>(setLayoutMargins:)]) &#123;</span><br><span class="line">        [cell setLayoutMargins:<span class="built_in">UIEdgeInsetsZero</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Explictly set your cell's layout margins.</span></span><br><span class="line">    <span class="comment">// NS_AVAILABLE_IOS(7_0)，需进行判断</span></span><br><span class="line">    <span class="comment">// 根据需求设置相应的边距</span></span><br><span class="line">    <span class="keyword">if</span> ([cell respondsToSelector:<span class="keyword">@selector</span>(setSeparatorInset:)]) &#123;</span><br><span class="line">        [cell setSeparatorInset:<span class="built_in">UIEdgeInsetsMake</span>(<span class="number">0</span>, <span class="number">16</span>, <span class="number">0</span>, <span class="number">16</span>)];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="修改UITableviewCell-imageView的大小"><a href="#修改UITableviewCell-imageView的大小" class="headerlink" title="修改UITableviewCell.imageView的大小"></a>修改<code>UITableviewCell.imageView</code>的大小</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIImage</span> *icon = [<span class="built_in">UIImage</span> imageNamed:<span class="string">@""</span>];</span><br><span class="line"><span class="built_in">CGSize</span> itemSize = <span class="built_in">CGSizeMake</span>(<span class="number">30</span>, <span class="number">30</span>);</span><br><span class="line"><span class="built_in">UIGraphicsBeginImageContextWithOptions</span>(itemSize, <span class="literal">NO</span> ,<span class="number">0.0</span>);</span><br><span class="line"><span class="built_in">CGRect</span> imageRect = <span class="built_in">CGRectMake</span>(<span class="number">0.0</span>, <span class="number">0.0</span>, itemSize.width, itemSize.height);</span><br><span class="line">[icon drawInRect:imageRect];</span><br><span class="line">cell.imageView.image = <span class="built_in">UIGraphicsGetImageFromCurrentImageContext</span>();</span><br><span class="line"><span class="built_in">UIGraphicsEndImageContext</span>();</span><br></pre></td></tr></table></figure>
<h3 id="判断某一行cell是否已经显示"><a href="#判断某一行cell是否已经显示" class="headerlink" title="判断某一行cell是否已经显示"></a>判断某一行<code>cell</code>是否已经显示</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">CGRect</span> cellRect = [tableView rectForRowAtIndexPath:indexPath];</span><br><span class="line"><span class="built_in">BOOL</span> completelyVisible = <span class="built_in">CGRectContainsRect</span>(tableView.bounds, cellRect);</span><br></pre></td></tr></table></figure>
<h3 id="打开或禁用UIView的复制、选择、全选等功能"><a href="#打开或禁用UIView的复制、选择、全选等功能" class="headerlink" title="打开或禁用UIView的复制、选择、全选等功能"></a>打开或禁用<code>UIView</code>的复制、选择、全选等功能</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// override the method</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)canPerformAction:(SEL)action withSender:(<span class="keyword">id</span>)sender &#123;</span><br><span class="line">    <span class="comment">// 返回NO为禁用，YES为开启</span></span><br><span class="line">    <span class="comment">// 粘贴</span></span><br><span class="line">    <span class="keyword">if</span> (action == <span class="keyword">@selector</span>(paste:)) <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">    <span class="comment">// 剪切</span></span><br><span class="line">    <span class="keyword">if</span> (action == <span class="keyword">@selector</span>(cut:)) <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">    <span class="comment">// 复制</span></span><br><span class="line">    <span class="keyword">if</span> (action == <span class="keyword">@selector</span>(<span class="keyword">copy</span>:)) <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">    <span class="comment">// 选择</span></span><br><span class="line">    <span class="keyword">if</span> (action == <span class="keyword">@selector</span>(select:)) <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">    <span class="comment">// 选中全部</span></span><br><span class="line">    <span class="keyword">if</span> (action == <span class="keyword">@selector</span>(selectAll:)) <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">    <span class="comment">// 删除</span></span><br><span class="line">    <span class="keyword">if</span> (action == <span class="keyword">@selector</span>(delete:)) <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">    <span class="comment">// 分享</span></span><br><span class="line">    <span class="keyword">if</span> (action == <span class="keyword">@selector</span>(share)) <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">    <span class="keyword">return</span> [<span class="keyword">super</span> canPerformAction:action withSender:sender];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="让UIView支持Autolayout计算高度"><a href="#让UIView支持Autolayout计算高度" class="headerlink" title="让UIView支持Autolayout计算高度"></a>让<code>UIView</code>支持<code>Autolayout</code>计算高度</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 重写系统计算高度的方法</span></span><br><span class="line">- (<span class="built_in">CGSize</span>)systemLayoutSizeFittingSize:(<span class="built_in">CGSize</span>)targetSize withHorizontalFittingPriority:(<span class="built_in">UILayoutPriority</span>)horizontalFittingPriority verticalFittingPriority:(<span class="built_in">UILayoutPriority</span>)verticalFittingPriority &#123;</span><br><span class="line"></span><br><span class="line">    [_tagView layoutIfNeeded];</span><br><span class="line">    [_tagView invalidateIntrinsicContentSize];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> [<span class="keyword">super</span> systemLayoutSizeFittingSize:targetSize withHorizontalFittingPriority:horizontalFittingPriority verticalFittingPriority:verticalFittingPriority];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="为NavigationBar设置titleView"><a href="#为NavigationBar设置titleView" class="headerlink" title="为NavigationBar设置titleView"></a>为<code>NavigationBar</code>设置<code>titleView</code></h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIButton</span> *titleButton = (&#123;</span><br><span class="line">    <span class="built_in">UIButton</span> *button = [<span class="built_in">UIButton</span> buttonWithType:<span class="built_in">UIButtonTypeCustom</span>];</span><br><span class="line">    button.backgroundColor = [<span class="built_in">UIColor</span> blackColor];</span><br><span class="line">    button.titleLabel.font = [<span class="built_in">UIFont</span> systemFontOfSize:<span class="number">16</span>];</span><br><span class="line">    [titleButton setTitle:showTitle forState:<span class="built_in">UIControlStateNormal</span>];</span><br><span class="line">    [titleButton setImage:[<span class="built_in">UIImage</span> imageNamed:<span class="string">@"top-arrw"</span>] forState:<span class="built_in">UIControlStateNormal</span>];</span><br><span class="line">    <span class="comment">// 这句话是重点，如果不调用`sizeToFit`方法的话，titleView根本显示不出来，或者只显示文字</span></span><br><span class="line">    [titleButton sizeToFit];</span><br><span class="line">    button;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">self</span>.navigationItem.titleView = titleButton;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="http://stackoverflow.com/questions/13341562/how-to-set-button-for-navigationitem-titleview" target="_blank" rel="noopener">http://stackoverflow.com/questions/13341562/how-to-set-button-for-navigationitem-titleview</a></p>
</blockquote>
<h3 id="手动更改iOS状态栏颜色"><a href="#手动更改iOS状态栏颜色" class="headerlink" title="手动更改iOS状态栏颜色"></a>手动更改iOS状态栏颜色</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)setStatusBarBackgroundColor:(<span class="built_in">UIColor</span> *)color &#123;</span><br><span class="line">    <span class="built_in">UIView</span> *statusBar = [[[<span class="built_in">UIApplication</span> sharedApplication] valueForKey:<span class="string">@"statusBarWindow"</span>] valueForKey:<span class="string">@"statusBar"</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ([statusBar respondsToSelector:<span class="keyword">@selector</span>(setBackgroundColor:)]) &#123;</span><br><span class="line">        statusBar.backgroundColor = color;    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="更改状态栏的类型"><a href="#更改状态栏的类型" class="headerlink" title="更改状态栏的类型"></a>更改状态栏的类型</h3><p><a href="http://www.tuicool.com/articles/MZfyE3Z" target="_blank" rel="noopener">iOS 中关于 NavigationController 中 preferredStatusBarStyle 一直不执行的问题</a></p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在plist文件里把 `View controller-based status bar appearance` 设置成 `YES`。</span></span><br><span class="line"><span class="comment">// </span></span><br><span class="line">- (<span class="keyword">void</span>)changeNavigationAndStatusBarStyle &#123;</span><br><span class="line">    <span class="comment">/// 状态栏</span></span><br><span class="line">    [<span class="keyword">self</span> preferredStatusBarStyle];</span><br><span class="line">    [<span class="keyword">self</span> setNeedsStatusBarAppearanceUpdate];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UIStatusBarStyle</span>)preferredStatusBarStyle &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>.isBlackStatusBar ? <span class="built_in">UIStatusBarStyleDefault</span> : <span class="built_in">UIStatusBarStyleLightContent</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="禁用UIButton的高亮状态"><a href="#禁用UIButton的高亮状态" class="headerlink" title="禁用UIButton的高亮状态"></a>禁用UIButton的高亮状态</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">button.adjustsImageWhenHighlighted = <span class="literal">NO</span>;</span><br><span class="line"><span class="comment">//或者在创建的时候</span></span><br><span class="line"><span class="built_in">UIButton</span> *button = [<span class="built_in">UIButton</span> buttonWithType:<span class="built_in">UIButtonTypeCustom</span>];</span><br></pre></td></tr></table></figure>
<h3 id="判断view是不是指定视图的子视图"><a href="#判断view是不是指定视图的子视图" class="headerlink" title="判断view是不是指定视图的子视图"></a>判断view是不是指定视图的子视图</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">BOOL</span> isView = [targetView isDescendantOfView:superView];</span><br></pre></td></tr></table></figure>
<h3 id="判断viewController是disappear还是dealloc"><a href="#判断viewController是disappear还是dealloc" class="headerlink" title="判断viewController是disappear还是dealloc"></a>判断viewController是disappear还是dealloc</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)viewWillDisappear:(<span class="built_in">BOOL</span>)animated &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewWillDisappear:animated];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">BOOL</span> isContains = [<span class="keyword">self</span>.navigationController.childViewControllers containsObject:<span class="keyword">self</span>];</span><br><span class="line">    <span class="keyword">if</span> (isContains) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"控制器只是单纯的disappear，比如pushToVC"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"控制器将要释放了"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="判断当前viewController是push进来的还是present进来的"><a href="#判断当前viewController是push进来的还是present进来的" class="headerlink" title="判断当前viewController是push进来的还是present进来的"></a>判断当前viewController是push进来的还是present进来的</h3><blockquote>
<p>如果A弹出B，那么A为presenting，B为presented。<br>A弹出B , 则B就是A的presentedViewController, A就是B的presentingViewController。</p>
<p>虽然A为控制器，但是当打印B的presentingViewController，显示类型为导航控制器，这说明如果当前视图有自己的导航控制器，则最终调用present方法的是当前控制器的导航控制器，如果不存在导航控制器，调用着是当前控制器（self）。</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果存在presentingViewController，则说明是当前视图是present出来的</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">self</span>.presentingViewController) &#123; </span><br><span class="line">    [<span class="keyword">self</span>.presentingViewController dismissViewControllerAnimated:<span class="literal">YES</span> completion:<span class="literal">NULL</span>];</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    [<span class="keyword">self</span>.navigationController popViewControllerAnimated:<span class="literal">YES</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="修改UItextField中placeholder的文字颜色"><a href="#修改UItextField中placeholder的文字颜色" class="headerlink" title="修改UItextField中placeholder的文字颜色"></a>修改<code>UItextField</code>中<code>placeholder</code>的文字颜色</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[textField setValue:[<span class="built_in">UIColor</span> redColor] forKeyPath:<span class="string">@"_placeholderLabel.textColor"</span>];</span><br></pre></td></tr></table></figure>
<h3 id="UITextField光标右移"><a href="#UITextField光标右移" class="headerlink" title="UITextField光标右移"></a><code>UITextField</code>光标右移</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个 leftView</span></span><br><span class="line">searchTextField.leftViewMode = <span class="built_in">UITextFieldViewModeAlways</span>;</span><br><span class="line">searchTextField.leftView = (&#123;</span><br><span class="line">    <span class="built_in">UIView</span> *leftView = [[<span class="built_in">UIView</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, margin, searchTextField.my_height)];</span><br><span class="line">    leftView.backgroundColor = [<span class="built_in">UIColor</span> clearColor];</span><br><span class="line">    leftView;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="UITextField文字周围增加边距"><a href="#UITextField文字周围增加边距" class="headerlink" title="UITextField文字周围增加边距"></a><code>UITextField</code>文字周围增加边距</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 子类化UITextField，增加insert属性</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ZDTextField</span> : <span class="title">UITextField</span></span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">UIEdgeInsets</span> insets;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在.m文件重写下列方法</span></span><br><span class="line">- (<span class="built_in">CGRect</span>)textRectForBounds:(<span class="built_in">CGRect</span>)bounds &#123;</span><br><span class="line">    <span class="built_in">CGRect</span> paddedRect = <span class="built_in">UIEdgeInsetsInsetRect</span>(bounds, <span class="keyword">self</span>.insets);</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>.rightViewMode == <span class="built_in">UITextFieldViewModeAlways</span> || <span class="keyword">self</span>.rightViewMode == <span class="built_in">UITextFieldViewModeUnlessEditing</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> [<span class="keyword">self</span> adjustRectWithWidthRightView:paddedRect];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> paddedRect;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">CGRect</span>)placeholderRectForBounds:(<span class="built_in">CGRect</span>)bounds &#123;</span><br><span class="line">    <span class="built_in">CGRect</span> paddedRect = <span class="built_in">UIEdgeInsetsInsetRect</span>(bounds, <span class="keyword">self</span>.insets);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>.rightViewMode == <span class="built_in">UITextFieldViewModeAlways</span> || <span class="keyword">self</span>.rightViewMode == <span class="built_in">UITextFieldViewModeUnlessEditing</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> [<span class="keyword">self</span> adjustRectWithWidthRightView:paddedRect];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> paddedRect;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">CGRect</span>)editingRectForBounds:(<span class="built_in">CGRect</span>)bounds &#123;</span><br><span class="line">    <span class="built_in">CGRect</span> paddedRect = <span class="built_in">UIEdgeInsetsInsetRect</span>(bounds, <span class="keyword">self</span>.insets);</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>.rightViewMode == <span class="built_in">UITextFieldViewModeAlways</span> || <span class="keyword">self</span>.rightViewMode == <span class="built_in">UITextFieldViewModeWhileEditing</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> [<span class="keyword">self</span> adjustRectWithWidthRightView:paddedRect];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> paddedRect;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">CGRect</span>)adjustRectWithWidthRightView:(<span class="built_in">CGRect</span>)bounds &#123;</span><br><span class="line">    <span class="built_in">CGRect</span> paddedRect = bounds;</span><br><span class="line">    paddedRect.size.width -= <span class="built_in">CGRectGetWidth</span>(<span class="keyword">self</span>.rightView.frame);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> paddedRect;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="直接设置UITextView的placeholder"><a href="#直接设置UITextView的placeholder" class="headerlink" title="直接设置UITextView的placeholder"></a>直接设置<code>UITextView</code>的<code>placeholder</code></h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">self</span> setValue:zd_placeHolderLabel forKey:<span class="string">@"_placeholderLabel"</span>];</span><br></pre></td></tr></table></figure>
<h3 id="动态调整-UITextView-的高度"><a href="#动态调整-UITextView-的高度" class="headerlink" title="动态调整 UITextView 的高度"></a>动态调整 <code>UITextView</code> 的高度</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)addKVOObserver &#123;</span><br><span class="line">    [<span class="keyword">self</span> addObserver:<span class="keyword">self</span> forKeyPath:<span class="string">@"contentSize"</span> options:<span class="built_in">NSKeyValueObservingOptionNew</span> context:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)observeValueForKeyPath:(<span class="built_in">NSString</span> *)keyPath</span><br><span class="line">                      ofObject:(<span class="keyword">id</span>)object</span><br><span class="line">                        change:(<span class="built_in">NSDictionary</span>&lt;<span class="built_in">NSString</span> *,<span class="keyword">id</span>&gt; *)change</span><br><span class="line">                       context:(<span class="keyword">void</span> *)context &#123;</span><br><span class="line">    <span class="built_in">UITextView</span> *textView = object;</span><br><span class="line">    textView.frame = (<span class="built_in">CGRect</span>)&#123;textView.frame.origin, textView.frame.size.width, textView.contentSize.height&#125;;</span><br><span class="line">    <span class="built_in">CGFloat</span> topCorrect = (textView.bounds.size.height - textView.contentSize.height * textView.zoomScale)/<span class="number">2.0</span>;</span><br><span class="line">    topCorrect = MAX(<span class="number">0.0</span>, topCorrect);</span><br><span class="line">    textView.contentOffset = (<span class="built_in">CGPoint</span>)&#123;<span class="number">0</span>, -topCorrect&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="当UITextView-UITextField中没有文字时，禁用回车键"><a href="#当UITextView-UITextField中没有文字时，禁用回车键" class="headerlink" title="当UITextView/UITextField中没有文字时，禁用回车键"></a>当<code>UITextView/UITextField</code>中没有文字时，禁用回车键</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">textField.enablesReturnKeyAutomatically = <span class="literal">YES</span>;</span><br></pre></td></tr></table></figure>
<h3 id="动画修改UILabel上的文字"><a href="#动画修改UILabel上的文字" class="headerlink" title="动画修改UILabel上的文字"></a>动画修改<code>UILabel</code>上的文字</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法一</span></span><br><span class="line"><span class="built_in">CATransition</span> *animation = [<span class="built_in">CATransition</span> animation];</span><br><span class="line">animation.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithName:kCAMediaTimingFunctionEaseInEaseOut];</span><br><span class="line">animation.type = kCATransitionFade;</span><br><span class="line">animation.duration = <span class="number">0.75</span>;</span><br><span class="line">[<span class="keyword">self</span>.label.layer addAnimation:animation forKey:<span class="string">@"kCATransitionFade"</span>];</span><br><span class="line"><span class="keyword">self</span>.label.text = <span class="string">@"New"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法二</span></span><br><span class="line">[<span class="built_in">UIView</span> transitionWithView:<span class="keyword">self</span>.label</span><br><span class="line">                      duration:<span class="number">0.25</span>f</span><br><span class="line">                       options:<span class="built_in">UIViewAnimationOptionTransitionCrossDissolve</span></span><br><span class="line">                    animations:^&#123;</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">self</span>.label.text = <span class="string">@"Well done!"</span>;</span><br><span class="line"></span><br><span class="line">                    &#125; completion:<span class="literal">nil</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法三</span></span><br><span class="line">[<span class="built_in">UIView</span> animateWithDuration:<span class="number">1.0</span></span><br><span class="line">                     animations:^&#123;</span><br><span class="line">                         <span class="keyword">self</span>.label.alpha = <span class="number">0.0</span>f;</span><br><span class="line">                         <span class="keyword">self</span>.label.text = <span class="string">@"newText"</span>;</span><br><span class="line">                         <span class="keyword">self</span>.label.alpha = <span class="number">1.0</span>f;</span><br><span class="line">                     &#125;];</span><br></pre></td></tr></table></figure>
<h3 id="计算UILabel上某段文字的frame"><a href="#计算UILabel上某段文字的frame" class="headerlink" title="计算UILabel上某段文字的frame"></a>计算<code>UILabel</code>上某段文字的<code>frame</code></h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">UILabel</span> (<span class="title">TextRect</span>)</span></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">CGRect</span>)boundingRectForCharacterRange:(<span class="built_in">NSRange</span>)range &#123;</span><br><span class="line">    <span class="built_in">NSTextStorage</span> *textStorage = [[<span class="built_in">NSTextStorage</span> alloc] initWithAttributedString:[<span class="keyword">self</span> attributedText]];</span><br><span class="line">    <span class="built_in">NSLayoutManager</span> *layoutManager = [[<span class="built_in">NSLayoutManager</span> alloc] init];</span><br><span class="line">    [textStorage addLayoutManager:layoutManager];</span><br><span class="line">    <span class="built_in">NSTextContainer</span> *textContainer = [[<span class="built_in">NSTextContainer</span> alloc] initWithSize:[<span class="keyword">self</span> bounds].size];</span><br><span class="line">    textContainer.lineFragmentPadding = <span class="number">0</span>;</span><br><span class="line">    [layoutManager addTextContainer:textContainer];</span><br><span class="line">    <span class="built_in">NSRange</span> glyphRange;</span><br><span class="line">    [layoutManager characterRangeForGlyphRange:range actualGlyphRange:&amp;glyphRange];</span><br><span class="line">    <span class="keyword">return</span> [layoutManager boundingRectForGlyphRange:glyphRange inTextContainer:textContainer];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="取消隐式动画"><a href="#取消隐式动画" class="headerlink" title="取消隐式动画"></a>取消隐式动画</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法一</span></span><br><span class="line">[<span class="built_in">UIView</span> performWithoutAnimation:^&#123;</span><br><span class="line">    [collectionView reloadItemsAtIndexPaths:@[[<span class="built_in">NSIndexPath</span> indexPathForItem:index inSection:<span class="number">0</span>]]];</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法二</span></span><br><span class="line">[<span class="built_in">UIView</span> animateWithDuration:<span class="number">0</span> animations:^&#123;</span><br><span class="line">    [collectionView performBatchUpdates:^&#123;</span><br><span class="line">        [collectionView reloadItemsAtIndexPaths:@[[<span class="built_in">NSIndexPath</span> indexPathForItem:index inSection:<span class="number">0</span>]]];</span><br><span class="line">    &#125; completion:<span class="literal">nil</span>];</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法三</span></span><br><span class="line">[<span class="built_in">UIView</span> setAnimationsEnabled:<span class="literal">NO</span>];</span><br><span class="line">[<span class="keyword">self</span>.trackPanel performBatchUpdates:^&#123;</span><br><span class="line">    [collectionView reloadItemsAtIndexPaths:@[[<span class="built_in">NSIndexPath</span> indexPathForItem:index inSection:<span class="number">0</span>]]];</span><br><span class="line">&#125; completion:^(<span class="built_in">BOOL</span> finished) &#123;</span><br><span class="line">    [<span class="built_in">UIView</span> setAnimationsEnabled:<span class="literal">YES</span>];</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法四</span></span><br><span class="line">- (<span class="keyword">void</span>)layoutSubviews &#123;</span><br><span class="line">    [<span class="keyword">super</span> layoutSubviews];</span><br><span class="line"></span><br><span class="line">    [<span class="built_in">CATransaction</span> begin];</span><br><span class="line">    [<span class="built_in">CATransaction</span> setDisableActions:<span class="literal">YES</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">self</span>.frameLayer.frame = <span class="keyword">self</span>.frameView.bounds;</span><br><span class="line"></span><br><span class="line">    [<span class="built_in">CATransaction</span> commit];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="动画暂停和重新开始"><a href="#动画暂停和重新开始" class="headerlink" title="动画暂停和重新开始"></a>动画暂停和重新开始</h3><p>Reference： <a href="http://stackoverflow.com/questions/2306870/is-there-a-way-to-pause-a-cabasicanimation/3003922#3003922" target="_blank" rel="noopener">http://stackoverflow.com/questions/2306870/is-there-a-way-to-pause-a-cabasicanimation/3003922#3003922</a></p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)pauseLayer:(<span class="built_in">CALayer</span> *)layer &#123;</span><br><span class="line">    <span class="built_in">CFTimeInterval</span> pausedTime = [layer convertTime:<span class="built_in">CACurrentMediaTime</span>() fromLayer:<span class="literal">nil</span>];</span><br><span class="line">    layer.speed = <span class="number">0.0</span>;</span><br><span class="line">    layer.timeOffset = pausedTime;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)resumeLayer:(<span class="built_in">CALayer</span> *)layer &#123;</span><br><span class="line">    <span class="built_in">CFTimeInterval</span> pausedTime = [layer timeOffset];</span><br><span class="line">    layer.speed = <span class="number">1.0</span>;</span><br><span class="line">    layer.timeOffset = <span class="number">0.0</span>;</span><br><span class="line">    layer.beginTime = <span class="number">0.0</span>;</span><br><span class="line">    <span class="built_in">CFTimeInterval</span> timeSincePause = [layer convertTime:<span class="built_in">CACurrentMediaTime</span>() fromLayer:<span class="literal">nil</span>] - pausedTime;</span><br><span class="line">    layer.beginTime = timeSincePause;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Pop动画"><a href="#Pop动画" class="headerlink" title="Pop动画"></a>Pop动画</h3><p><a href="https://github.com/facebook/pop/issues/28" target="_blank" rel="noopener">https://github.com/facebook/pop/issues/28</a></p>
<p><img src="https://camo.githubusercontent.com/28a42913bbc1dd0d27459991ef14b0a3b9a80489/687474703a2f2f662e636c2e6c792f6974656d732f334f3351336d3368305431323268316f323531592f506f70436f6e74726f6c506f696e74732e676966" alt=""></p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">CGFloat</span> controlPointOfLine; <span class="comment">// property on view controller</span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)controlPointAnimation &#123;</span><br><span class="line">    <span class="keyword">self</span>.controlPointOfLine = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">CGFloat</span> height = <span class="number">300.</span>f;</span><br><span class="line">    bendiPath = [<span class="built_in">UIBezierPath</span> bezierPath];</span><br><span class="line">    [bendiPath moveToPoint:<span class="built_in">CGPointMake</span>(<span class="number">0</span>, <span class="number">0</span>)];</span><br><span class="line">    [bendiPath addCurveToPoint:<span class="built_in">CGPointMake</span>(<span class="number">0</span>, height) controlPoint1:<span class="built_in">CGPointMake</span>(<span class="number">0</span>, height * <span class="number">0.5</span>) controlPoint2:<span class="built_in">CGPointMake</span>(<span class="number">0</span>, height * <span class="number">0.5</span>)];</span><br><span class="line"></span><br><span class="line">    shape = [<span class="built_in">CAShapeLayer</span> layer];</span><br><span class="line">    shape.path = bendiPath.CGPath;</span><br><span class="line">    shape.strokeColor = [<span class="built_in">UIColor</span> blackColor].CGColor;</span><br><span class="line">    shape.lineWidth = <span class="number">10.</span>f;</span><br><span class="line">    shape.fillColor = <span class="literal">nil</span>;</span><br><span class="line">    shape.position =<span class="built_in">CGPointMake</span>(<span class="keyword">self</span>.view.bounds.size.width * <span class="number">0.5</span>, <span class="keyword">self</span>.view.bounds.size.height * <span class="number">0.5</span>);</span><br><span class="line">    [<span class="keyword">self</span>.view.layer addSublayer:shape];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//    return;</span></span><br><span class="line">    <span class="keyword">self</span>.pop = [POPAnimatableProperty propertyWithName:<span class="string">@"controlPointOfLine"</span> initializer:^(POPMutableAnimatableProperty *prop) &#123;</span><br><span class="line">        <span class="comment">// read value</span></span><br><span class="line">        prop.readBlock = ^(DHTDetailViewController *obj, <span class="built_in">CGFloat</span> values[]) &#123;</span><br><span class="line">            values[<span class="number">0</span>] = <span class="keyword">self</span>.controlPointOfLine;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// write value</span></span><br><span class="line">        prop.writeBlock = ^(DHTDetailViewController *obj, <span class="keyword">const</span> <span class="built_in">CGFloat</span> values[]) &#123;</span><br><span class="line">            obj.controlPointOfLine = values[<span class="number">0</span>];</span><br><span class="line">            <span class="comment">// update bezier</span></span><br><span class="line">            [bendiPath removeAllPoints];</span><br><span class="line">            [bendiPath moveToPoint:<span class="built_in">CGPointMake</span>(<span class="number">0</span>, <span class="number">0</span>)];</span><br><span class="line">            [bendiPath addCurveToPoint:<span class="built_in">CGPointMake</span>(<span class="number">0</span>, height) controlPoint1:<span class="built_in">CGPointMake</span>(obj.controlPointOfLine, height * <span class="number">0.5</span>) controlPoint2:<span class="built_in">CGPointMake</span>(obj.controlPointOfLine, height * <span class="number">0.5</span>)];</span><br><span class="line"></span><br><span class="line">            [label setText:[<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%f"</span>, obj.controlPointOfLine]];</span><br><span class="line">            [label sizeToFit];</span><br><span class="line">            label.layer.position = <span class="keyword">self</span>.view.center;</span><br><span class="line">            shape.path = bendiPath.CGPath;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// dynamics threshold</span></span><br><span class="line">        prop.threshold = <span class="number">0.1</span>;</span><br><span class="line">    &#125;];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">self</span>.anim = [POPSpringAnimation animation];</span><br><span class="line">    _anim.fromValue = @(<span class="number">-50.0</span>);</span><br><span class="line">    _anim.toValue =  @(<span class="number">0.</span>f);</span><br><span class="line">    _anim.springBounciness = <span class="number">30.1</span>;</span><br><span class="line">    _anim.springSpeed = <span class="number">10.4</span>;</span><br><span class="line">    _anim.dynamicsTension = <span class="number">2000</span>;</span><br><span class="line">    _anim.property = <span class="keyword">self</span>.pop;</span><br><span class="line">    [<span class="keyword">self</span> pop_addAnimation:_anim forKey:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)touchesBegan:(<span class="built_in">NSSet</span> *)touches withEvent:(<span class="built_in">UIEvent</span> *)event &#123;</span><br><span class="line">    [<span class="keyword">super</span> touchesBegan:touches withEvent:event];</span><br><span class="line"></span><br><span class="line"><span class="comment">// get touches in view, before and after shapelayer, to get the new control point</span></span><br><span class="line">    <span class="built_in">UITouch</span> *touch = [[event allTouches] anyObject];</span><br><span class="line">    <span class="built_in">CGPoint</span> location = [touch locationInView:touch.view];</span><br><span class="line">    <span class="built_in">CGFloat</span> controlPoint = location.x - shape.position.x;</span><br><span class="line"></span><br><span class="line">    _anim.fromValue = @(controlPoint);</span><br><span class="line">    _anim.toValue =  @(<span class="number">0.</span>f);</span><br><span class="line"></span><br><span class="line">     [<span class="keyword">self</span> pop_addAnimation:_anim forKey:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Autolayout动画"><a href="#Autolayout动画" class="headerlink" title="Autolayout动画"></a>Autolayout动画</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[containerView setNeedsLayout];</span><br><span class="line">[<span class="built_in">UIView</span> animateWithDuration:<span class="number">1.0</span> animations:^&#123;</span><br><span class="line">  <span class="comment">// Make all constraint changes here</span></span><br><span class="line">  [containerView layoutIfNeeded];</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<h3 id="去掉导航栏返回按钮的back标题"><a href="#去掉导航栏返回按钮的back标题" class="headerlink" title="去掉导航栏返回按钮的back标题"></a>去掉导航栏返回按钮的back标题</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第一种方法:</span></span><br><span class="line">[[<span class="built_in">UIBarButtonItem</span> appearance] setBackButtonTitlePositionAdjustment:<span class="built_in">UIOffsetMake</span>(<span class="number">0</span>, <span class="number">-60</span>) forBarMetrics:<span class="built_in">UIBarMetricsDefault</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二种方法:</span></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">UINavigationItem</span> (<span class="title">backBarButttonItem</span>)</span></span><br><span class="line">- (<span class="built_in">UIBarButtonItem</span>*)backBarButtonItem &#123;</span><br><span class="line">    <span class="keyword">if</span> ([<span class="built_in">UIDevice</span> iOS_7]) &#123;</span><br><span class="line">        <span class="keyword">return</span> [[<span class="built_in">UIBarButtonItem</span> alloc] initWithTitle:<span class="string">@""</span> style:<span class="built_in">UIBarButtonItemStylePlain</span> target:<span class="literal">nil</span> action:<span class="literal">NULL</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> [[<span class="built_in">UIBarButtonItem</span> alloc] initWithTitle:<span class="string">@" "</span> style:<span class="built_in">UIBarButtonItemStylePlain</span> target:<span class="literal">nil</span> action:<span class="literal">NULL</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="调整barButtonItem之间的距离"><a href="#调整barButtonItem之间的距离" class="headerlink" title="调整barButtonItem之间的距离"></a>调整barButtonItem之间的距离</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIImage</span> *img = [[<span class="built_in">UIImage</span> imageNamed:<span class="string">@"icon_cog"</span>] imageWithRenderingMode:<span class="built_in">UIImageRenderingModeAlwaysOriginal</span>];</span><br><span class="line"><span class="comment">//宽度为负数的固定间距的系统item</span></span><br><span class="line"><span class="built_in">UIBarButtonItem</span> *rightNegativeSpacer = [[<span class="built_in">UIBarButtonItem</span> alloc] initWithBarButtonSystemItem:<span class="built_in">UIBarButtonSystemItemFixedSpace</span> target:<span class="literal">nil</span> action:<span class="literal">nil</span>];</span><br><span class="line">[rightNegativeSpacer setWidth:<span class="number">-15</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">UIBarButtonItem</span> *rightBtnItem1 = [[<span class="built_in">UIBarButtonItem</span> alloc]initWithImage:img style:<span class="built_in">UIBarButtonItemStylePlain</span> target:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(rightButtonItemClicked:)];</span><br><span class="line"><span class="built_in">UIBarButtonItem</span> *rightBtnItem2 = [[<span class="built_in">UIBarButtonItem</span> alloc]initWithImage:img style:<span class="built_in">UIBarButtonItemStylePlain</span> target:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(rightButtonItemClicked:)];</span><br><span class="line"><span class="keyword">self</span>.navigationItem.rightBarButtonItems = @[rightNegativeSpacer,rightBtnItem1,rightBtnItem2];</span><br></pre></td></tr></table></figure>
<h3 id="解决自定义返回按钮导致手势返回失败的问题"><a href="#解决自定义返回按钮导致手势返回失败的问题" class="headerlink" title="解决自定义返回按钮导致手势返回失败的问题"></a>解决自定义返回按钮导致手势返回失败的问题</h3><blockquote>
<p>1、代理方法</p>
<p>思路：先把导航控制器手势返回的代理保存起来，然后再把当前的控制器设为导航控制器手势返回的代理；当当前控制消失的时候再把原来的代理给导航控制器的手势返回。</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ViewController</span> () &lt;<span class="title">UIGestureRecognizerDelegate</span>&gt;</span></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">ViewController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">id</span>&lt;<span class="built_in">UIGestureRecognizerDelegate</span>&gt; _delegate</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">   [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line"></span><br><span class="line">     <span class="comment">// 自定义返回按钮</span></span><br><span class="line">   <span class="built_in">UIBarButtonItem</span> *backItem = [[<span class="built_in">UIBarButtonItem</span> alloc] initWithCustomView:(&#123;</span><br><span class="line">        <span class="built_in">UIButton</span> *backButton = [<span class="built_in">UIButton</span> buttonWithType:<span class="built_in">UIButtonTypeCustom</span>];</span><br><span class="line">        backButton.size = (<span class="built_in">CGSize</span>)&#123;<span class="number">22</span>, <span class="number">22</span>&#125;;</span><br><span class="line">        backButton.image = [<span class="built_in">UIImage</span> imageNamed:<span class="string">@"icon_back"</span>];</span><br><span class="line">        [backButton.image addTarget:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(back:) forControlEvents:<span class="built_in">UIControlEventTouchUpInside</span>];</span><br><span class="line">        backButton;</span><br><span class="line">    &#125;)];</span><br><span class="line">    <span class="keyword">self</span>.navigationItem.leftBarButtonItem = backItem;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)back:(<span class="built_in">UIButton</span> *)button &#123;</span><br><span class="line">    [<span class="keyword">self</span>.navigationController popViewControllerAnimated:<span class="literal">YES</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)viewWillAppear:(<span class="built_in">BOOL</span>)animated &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewWillAppear:animated];</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>.navigationController.viewControllers.count &gt; <span class="number">1</span>) &#123;</span><br><span class="line">          <span class="comment">// 记录系统返回手势的代理</span></span><br><span class="line">        _delegate = <span class="keyword">self</span>.navigationController.interactivePopGestureRecognizer.delegate;</span><br><span class="line">          <span class="comment">// 设置系统返回手势的代理为当前控制器</span></span><br><span class="line">        <span class="keyword">self</span>.navigationController.interactivePopGestureRecognizer.delegate = <span class="keyword">self</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)viewWillDisappear:(<span class="built_in">BOOL</span>)animated &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewWillDisappear:animated];</span><br><span class="line">     <span class="comment">// 设置系统返回手势的代理为我们刚进入控制器的时候记录的系统的返回手势代理</span></span><br><span class="line">    <span class="keyword">self</span>.navigationController.interactivePopGestureRecognizer.delegate = _delegate;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark - UIGestureRecognizerDelegate</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)gestureRecognizerShouldBegin:(<span class="built_in">UIGestureRecognizer</span> *)gestureRecognizer &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>.navigationController.childViewControllers.count &gt; <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">BOOL</span>)gestureRecognizer:(<span class="built_in">UIGestureRecognizer</span> *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(<span class="built_in">UIGestureRecognizer</span> *)otherGestureRecognizer &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>.navigationController.viewControllers.count &gt; <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>2、添加action事件的方法</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)viewWillAppear:(<span class="built_in">BOOL</span>)animated &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewWillAppear:animated];</span><br><span class="line">    [<span class="keyword">self</span>.navigationController.interactivePopGestureRecognizer addTarget:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(xxxx)];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)viewWillDisappear:(<span class="built_in">BOOL</span>)animated &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewWillDisappear:animated];</span><br><span class="line">    [<span class="keyword">self</span>.navigationController.interactivePopGestureRecognizer removeTarget:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(xxxx)];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="全屏手势返回"><a href="#全屏手势返回" class="headerlink" title="全屏手势返回"></a>全屏手势返回</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">    <span class="comment">// self.interactivePopGestureRecognizer系统手势类型为`UIScreenEdgePanGestureRecognizer`</span></span><br><span class="line">    <span class="comment">// 设置代理</span></span><br><span class="line">    <span class="keyword">id</span> target = <span class="keyword">self</span>.interactivePopGestureRecognizer.delegate;</span><br><span class="line">    <span class="comment">// 创建手势,并设置代理</span></span><br><span class="line">    <span class="built_in">UIPanGestureRecognizer</span> *pan = [[<span class="built_in">UIPanGestureRecognizer</span> alloc] initWithTarget:target action:<span class="keyword">@selector</span>(handleNavigationTransition:)];</span><br><span class="line">    pan.delegate = <span class="keyword">self</span>;</span><br><span class="line">    <span class="comment">// 添加手势</span></span><br><span class="line">    [<span class="keyword">self</span>.view addGestureRecognizer:pan];</span><br><span class="line">     <span class="comment">// 将系统自带的手势覆盖掉</span></span><br><span class="line">    <span class="keyword">self</span>.interactivePopGestureRecognizer.enabled = <span class="literal">NO</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="从一个隐藏导航栏的-A-控制器-push-到一个有导航栏的-B-控制器中-导航栏隐藏问题"><a href="#从一个隐藏导航栏的-A-控制器-push-到一个有导航栏的-B-控制器中-导航栏隐藏问题" class="headerlink" title="从一个隐藏导航栏的 A 控制器 push 到一个有导航栏的 B 控制器中(导航栏隐藏问题)"></a>从一个隐藏导航栏的 A 控制器 push 到一个有导航栏的 B 控制器中(导航栏隐藏问题)</h3><blockquote>
<p>在不显示导航栏的 A 控制器中遵守<code>UINavigationControllerDelegate</code>协议,实现其代理方法</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#pragma mark - UINavigationControllerDelegate</span></span><br><span class="line">-(<span class="keyword">void</span>)navigationController:(<span class="built_in">UINavigationController</span> *)navigationController willShowViewController:(<span class="built_in">UIViewController</span> *)viewController animated:(<span class="built_in">BOOL</span>)animated &#123;</span><br><span class="line">    <span class="built_in">BOOL</span> isShowBar = [viewController isKindOfClass:[<span class="keyword">self</span> <span class="keyword">class</span>]];</span><br><span class="line">    [<span class="keyword">self</span>.navigationController setNavigationBarHidden:isShowBar animated:<span class="literal">YES</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="页面跳转时翻转动画"><a href="#页面跳转时翻转动画" class="headerlink" title="页面跳转时翻转动画"></a>页面跳转时翻转动画</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// modal方式</span></span><br><span class="line">    TestViewController *vc = [[TestViewController alloc] init];</span><br><span class="line">    vc.view.backgroundColor = [<span class="built_in">UIColor</span> redColor];</span><br><span class="line">    vc.modalTransitionStyle = <span class="built_in">UIModalTransitionStyleCoverVertical</span>;</span><br><span class="line">    [<span class="keyword">self</span> presentViewController:vc animated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// push方式</span></span><br><span class="line">    TestViewController *vc = [[TestViewController alloc] init];</span><br><span class="line">    vc.view.backgroundColor = [<span class="built_in">UIColor</span> redColor];</span><br><span class="line">    [<span class="built_in">UIView</span> beginAnimations:<span class="string">@"View Flip"</span> context:<span class="literal">nil</span>];</span><br><span class="line">    [<span class="built_in">UIView</span> setAnimationDuration:<span class="number">0.80</span>];</span><br><span class="line">    [<span class="built_in">UIView</span> setAnimationCurve:<span class="built_in">UIViewAnimationCurveEaseInOut</span>];</span><br><span class="line">    [<span class="built_in">UIView</span> setAnimationTransition:<span class="built_in">UIViewAnimationTransitionFlipFromRight</span> forView:<span class="keyword">self</span>.navigationController.view cache:<span class="literal">NO</span>];</span><br><span class="line">    [<span class="keyword">self</span>.navigationController pushViewController:vc animated:<span class="literal">YES</span>];</span><br><span class="line">    [<span class="built_in">UIView</span> commitAnimations];</span><br></pre></td></tr></table></figure>
<h3 id="以modal样式进行push跳转"><a href="#以modal样式进行push跳转" class="headerlink" title="以modal样式进行push跳转"></a>以<code>modal</code>样式进行<code>push</code>跳转</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)push &#123;</span><br><span class="line">    TestViewController *vc = [[TestViewController alloc] init];</span><br><span class="line">    vc.view.backgroundColor = [<span class="built_in">UIColor</span> redColor];</span><br><span class="line">    <span class="built_in">CATransition</span>* transition = [<span class="built_in">CATransition</span> animation];</span><br><span class="line">    transition.duration = <span class="number">0.4</span>f;</span><br><span class="line">    transition.type = kCATransitionMoveIn;</span><br><span class="line">    transition.subtype = kCATransitionFromTop;</span><br><span class="line">    [<span class="keyword">self</span>.navigationController.view.layer addAnimation:transition forKey:kCATransition];</span><br><span class="line">    [<span class="keyword">self</span>.navigationController pushViewController:vc animated:<span class="literal">NO</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)pop &#123;</span><br><span class="line">    <span class="built_in">CATransition</span>* transition = [<span class="built_in">CATransition</span> animation];</span><br><span class="line">    transition.duration = <span class="number">0.4</span>f;</span><br><span class="line">    transition.type = kCATransitionReveal;</span><br><span class="line">    transition.subtype = kCATransitionFromBottom;</span><br><span class="line">    [<span class="keyword">self</span>.navigationController.view.layer addAnimation:transition forKey:kCATransition];</span><br><span class="line">    [<span class="keyword">self</span>.navigationController popViewControllerAnimated:<span class="literal">NO</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Dispatch-Source方式调整进度"><a href="#Dispatch-Source方式调整进度" class="headerlink" title="Dispatch Source方式调整进度"></a><code>Dispatch Source</code>方式调整进度</h3><blockquote>
<p><a href="http://www.jianshu.com/p/880c2f9301b6" target="_blank" rel="noopener">多线程–Dispatch Source</a></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1、指定`DISPATCH_SOURCE_TYPE_DATA_ADD`，做成Dispatch Source(分派源)。设定Main Dispatch Queue 为追加处理的Dispatch Queue</span></span><br><span class="line">dispatch_source_t source = dispatch_source_create(DISPATCH_SOURCE_TYPE_DATA_ADD, <span class="number">0</span>, <span class="number">0</span>, dispatch_get_main_queue());</span><br><span class="line"></span><br><span class="line">__block <span class="built_in">NSUInteger</span> totalComplete = <span class="number">0</span>;</span><br><span class="line">dispatch_source_set_event_handler(source, ^&#123;</span><br><span class="line">    <span class="comment">// 当处理事件被最终执行时，计算后的数据可以通过dispatch_source_get_data来获取。</span></span><br><span class="line">    <span class="comment">// 这个数据的值在每次响应事件执行后会被重置，所以totalComplete的值是最终累积的值。</span></span><br><span class="line">    <span class="built_in">NSUInteger</span> value = dispatch_source_get_data(source);</span><br><span class="line">    totalComplete += value;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"进度：%f"</span>, totalComplete / <span class="number">100.</span>f);</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"线程号：%@"</span>, [<span class="built_in">NSThread</span> currentThread]);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//分派源创建时默认处于暂停状态，在分派源分派处理程序之前必须先恢复。</span></span><br><span class="line">dispatch_resume(source);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2、恢复源后，就可以通过`dispatch_source_merge_data`向`Dispatch Source`(分派源)发送事件:</span></span><br><span class="line"><span class="built_in">dispatch_queue_t</span> queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">NSUInteger</span> index = <span class="number">0</span>; index &lt; <span class="number">100</span>; index++) &#123;</span><br><span class="line">    <span class="built_in">dispatch_async</span>(queue, ^&#123;</span><br><span class="line">        dispatch_source_merge_data(source, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        usleep(<span class="number">20000</span>); <span class="comment">//0.02秒</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">//3、比较上面的for循环代码，将dispatch_async放在外面for循环的外面，打印结果不一样</span></span><br><span class="line"><span class="comment">dispatch_async(queue, ^&#123;</span></span><br><span class="line"><span class="comment">   for (NSUInteger index = 0; index &lt; 100; index++) &#123;</span></span><br><span class="line"><span class="comment">       dispatch_source_merge_data(source, 1);</span></span><br><span class="line"><span class="comment">       NSLog(@":recycle:线程号：%@~~~~~~~~~~~~i = %ld", [NSThread currentThread], index);</span></span><br><span class="line"><span class="comment">       usleep(20000);//0.02秒</span></span><br><span class="line"><span class="comment">   &#125;</span></span><br><span class="line"><span class="comment">&#125;);</span></span><br><span class="line"><span class="comment">// 2是将100个任务添加到queue里面，而3是在queue里面添加一个任务，而这一个任务做了100次循环</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="本地推送"><a href="#本地推送" class="headerlink" title="本地推送"></a>本地推送</h3><blockquote>
<p>AppDelegate.m</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)application:(<span class="built_in">UIApplication</span> *)application didReceiveLocalNotification:(<span class="built_in">UILocalNotification</span> *)notification&#123;</span><br><span class="line">    <span class="keyword">if</span> ([<span class="built_in">UIApplication</span> sharedApplication].applicationState == <span class="built_in">UIApplicationStateActive</span>) &#123;<span class="comment">//app在前台</span></span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"app在前台"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;<span class="comment">//不在前台</span></span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"app不在前台"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>iOS10以前</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)post_Less_iOS10:(<span class="built_in">NSDictionary</span> *)userInfo title:(<span class="built_in">NSString</span> *)title body:(<span class="built_in">NSString</span> *)body &#123;</span><br><span class="line">    <span class="built_in">UILocalNotification</span> *notification = [[<span class="built_in">UILocalNotification</span> alloc] init];</span><br><span class="line">    <span class="comment">// 设置触发通知的时间，这里设置的是立即触发</span></span><br><span class="line">    <span class="built_in">NSDate</span> *fireDate = [<span class="built_in">NSDate</span> date];</span><br><span class="line">    notification.fireDate = fireDate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 通知内容</span></span><br><span class="line">    notification.alertBody =  body;</span><br><span class="line">    <span class="comment">// 标题，iOS8.2之后才有了这个属性</span></span><br><span class="line">    <span class="keyword">if</span> ([notification respondsToSelector:<span class="keyword">@selector</span>(setAlertTitle:)]) &#123;</span><br><span class="line">        notification.alertTitle = title;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 通知的声音</span></span><br><span class="line">    notification.soundName = <span class="built_in">UILocalNotificationDefaultSoundName</span>;</span><br><span class="line">    <span class="comment">// 附带内容</span></span><br><span class="line">    notification.userInfo = userInfo;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ios8后，需要添加这个注册，才能得到授权</span></span><br><span class="line">    <span class="keyword">if</span> ([[<span class="built_in">UIApplication</span> sharedApplication] respondsToSelector:<span class="keyword">@selector</span>(registerUserNotificationSettings:)]) &#123;</span><br><span class="line">        <span class="comment">///设置</span></span><br><span class="line">        <span class="built_in">UIUserNotificationType</span> type =  <span class="built_in">UIUserNotificationTypeAlert</span> | <span class="built_in">UIUserNotificationTypeBadge</span> | <span class="built_in">UIUserNotificationTypeSound</span>;</span><br><span class="line">        <span class="built_in">UIUserNotificationSettings</span> *settings = [<span class="built_in">UIUserNotificationSettings</span> settingsForTypes:type</span><br><span class="line">                                                                                 categories:<span class="literal">nil</span>];</span><br><span class="line">        [[<span class="built_in">UIApplication</span> sharedApplication] registerUserNotificationSettings:settings];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 执行通知注册</span></span><br><span class="line">    [[<span class="built_in">UIApplication</span> sharedApplication] scheduleLocalNotification:notification];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>iOS10之后</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)registerNoti &#123;</span><br><span class="line">    <span class="comment">// iOS10 兼容</span></span><br><span class="line">    <span class="keyword">if</span> ([[<span class="built_in">UIDevice</span> currentDevice].systemVersion floatValue] &gt;= <span class="number">10.0</span>) &#123;</span><br><span class="line">        <span class="comment">// 使用 UNUserNotificationCenter 来管理通知</span></span><br><span class="line">        UNUserNotificationCenter *uncenter = [UNUserNotificationCenter currentNotificationCenter];</span><br><span class="line">        <span class="comment">// 监听回调事件</span></span><br><span class="line">        [uncenter setDelegate:<span class="keyword">self</span>];</span><br><span class="line">        <span class="comment">//iOS10 使用以下方法注册，才能得到授权</span></span><br><span class="line">        [uncenter requestAuthorizationWithOptions:(UNAuthorizationOptionAlert+UNAuthorizationOptionBadge+UNAuthorizationOptionSound)</span><br><span class="line">                                completionHandler:^(<span class="built_in">BOOL</span> granted, <span class="built_in">NSError</span> * _Nullable error) &#123;</span><br><span class="line">                                    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span> , granted ? <span class="string">@"授权成功"</span> : <span class="string">@"授权失败"</span>);</span><br><span class="line">                                &#125;];</span><br><span class="line">        <span class="comment">// 获取当前的通知授权状态, UNNotificationSettings</span></span><br><span class="line">        [uncenter getNotificationSettingsWithCompletionHandler:^(UNNotificationSettings * _Nonnull settings) &#123;</span><br><span class="line">            <span class="keyword">if</span> (settings.authorizationStatus == UNAuthorizationStatusNotDetermined) &#123;</span><br><span class="line">                <span class="built_in">NSLog</span>(<span class="string">@"未选择"</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (settings.authorizationStatus == UNAuthorizationStatusDenied) &#123;</span><br><span class="line">                <span class="built_in">NSLog</span>(<span class="string">@"未授权"</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (settings.authorizationStatus == UNAuthorizationStatusAuthorized) &#123;</span><br><span class="line">                <span class="built_in">NSLog</span>(<span class="string">@"已授权"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)post_iOS10:(<span class="built_in">NSDictionary</span> *)userInfo title:(<span class="built_in">NSString</span> *)title body:(<span class="built_in">NSString</span> *)body &#123;</span><br><span class="line">    <span class="comment">// 使用 UNUserNotificationCenter 来管理通知</span></span><br><span class="line">    UNUserNotificationCenter* center = [UNUserNotificationCenter currentNotificationCenter];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//需创建一个包含待通知内容的 UNMutableNotificationContent 对象，注意不是 UNNotificationContent ,此对象为不可变对象。</span></span><br><span class="line">    UNMutableNotificationContent* content = [[UNMutableNotificationContent alloc] init];</span><br><span class="line">    content.title = [<span class="built_in">NSString</span> localizedUserNotificationStringForKey:title arguments:<span class="literal">nil</span>];</span><br><span class="line">    content.body = [<span class="built_in">NSString</span> localizedUserNotificationStringForKey:body</span><br><span class="line">                                                         arguments:<span class="literal">nil</span>];</span><br><span class="line">    content.sound = [UNNotificationSound defaultSound];</span><br><span class="line"></span><br><span class="line">    content.userInfo  = userInfo;</span><br><span class="line">    <span class="comment">// 在 alertTime 后推送本地推送</span></span><br><span class="line">    UNTimeIntervalNotificationTrigger* trigger = [UNTimeIntervalNotificationTrigger</span><br><span class="line">                                                  triggerWithTimeInterval:<span class="number">1</span> repeats:<span class="literal">NO</span>];</span><br><span class="line"></span><br><span class="line">    UNNotificationRequest* request = [UNNotificationRequest requestWithIdentifier:<span class="string">@"FiveSecond"</span></span><br><span class="line">                                                                          content:content trigger:trigger];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//添加推送成功后的处理！</span></span><br><span class="line">    [center addNotificationRequest:request withCompletionHandler:^(<span class="built_in">NSError</span> * _Nullable error) &#123;</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark - UNUserNotificationCenterDelegate</span></span><br><span class="line"><span class="comment">///在前台接收到通知</span></span><br><span class="line">- (<span class="keyword">void</span>)userNotificationCenter:(UNUserNotificationCenter *)center willPresentNotification:(UNNotification *)notification withCompletionHandler:(<span class="keyword">void</span> (^)(UNNotificationPresentationOptions))completionHandler&#123;</span><br><span class="line">    completionHandler(UNNotificationPresentationOptionAlert);<span class="comment">//不写这句通知不会出现在前台，如有需要|UNNotificationPresentationOptionSound，角标UNNotificationPresentationOptionBadge</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">///点击通知</span></span><br><span class="line">- (<span class="keyword">void</span>)userNotificationCenter:(UNUserNotificationCenter *)center didReceiveNotificationResponse:(UNNotificationResponse *)response withCompletionHandler:(<span class="keyword">void</span> (^)())completionHandler&#123;</span><br><span class="line">    <span class="comment">//handle touch event</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="禁止锁屏"><a href="#禁止锁屏" class="headerlink" title="禁止锁屏"></a>禁止锁屏</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="built_in">UIApplication</span> sharedApplication].idleTimerDisabled = <span class="literal">YES</span>;</span><br><span class="line"><span class="comment">// 或</span></span><br><span class="line">[[<span class="built_in">UIApplication</span> sharedApplication] setIdleTimerDisabled:<span class="literal">YES</span>];</span><br></pre></td></tr></table></figure>
<h3 id="退出应用"><a href="#退出应用" class="headerlink" title="退出应用"></a>退出应用</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//退出方法</span></span><br><span class="line">- (<span class="keyword">void</span>)exitApp &#123;</span><br><span class="line">    [<span class="built_in">UIView</span> beginAnimations:<span class="string">@"exitApplication"</span> context:<span class="literal">nil</span>];</span><br><span class="line">    [<span class="built_in">UIView</span> setAnimationDuration:<span class="number">0.5</span>];</span><br><span class="line">    [<span class="built_in">UIView</span> setAnimationDelegate:<span class="keyword">self</span>];</span><br><span class="line">    [<span class="built_in">UIView</span> setAnimationTransition:<span class="built_in">UIViewAnimationTransitionCurlUp</span></span><br><span class="line">                           forView:<span class="keyword">self</span>.view.window cache:<span class="literal">NO</span>];</span><br><span class="line">    [<span class="built_in">UIView</span> setAnimationDidStopSelector:<span class="keyword">@selector</span>(animationFinished:finished:context:)];</span><br><span class="line">    <span class="keyword">self</span>.view.window.bounds = <span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    [<span class="built_in">UIView</span> commitAnimations];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)animationFinished:(<span class="built_in">NSString</span> *)animationID finished:(<span class="built_in">NSNumber</span> *)finished context:(<span class="keyword">void</span> *)context &#123;</span><br><span class="line">    <span class="keyword">if</span> ([animationID compare:<span class="string">@"exitApplication"</span>] == <span class="number">0</span>) &#123;</span><br><span class="line">        exit(<span class="number">0</span>); <span class="comment">//退出</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="获取手机安装的应用"><a href="#获取手机安装的应用" class="headerlink" title="获取手机安装的应用"></a>获取手机安装的应用</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Class c =<span class="built_in">NSClassFromString</span>(<span class="string">@"LSApplicationWorkspace"</span>);</span><br><span class="line"><span class="keyword">id</span> s = [(<span class="keyword">id</span>)c performSelector:<span class="built_in">NSSelectorFromString</span>(<span class="string">@"defaultWorkspace"</span>)];</span><br><span class="line"><span class="built_in">NSArray</span> *array = [s performSelector:<span class="built_in">NSSelectorFromString</span>(<span class="string">@"allInstalledApplications"</span>)];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">id</span> item <span class="keyword">in</span> array) &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[item performSelector:<span class="built_in">NSSelectorFromString</span>(<span class="string">@"applicationIdentifier"</span>)]);</span><br><span class="line">    <span class="comment">//NSLog(@"%@",[item performSelector:NSSelectorFromString(@"bundleIdentifier")]);</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[item performSelector:<span class="built_in">NSSelectorFromString</span>(<span class="string">@"bundleVersion"</span>)]);</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[item performSelector:<span class="built_in">NSSelectorFromString</span>(<span class="string">@"shortVersionString"</span>)]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="打开系统设置界面"><a href="#打开系统设置界面" class="headerlink" title="打开系统设置界面"></a>打开系统设置界面</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//iOS8之后</span></span><br><span class="line">[[<span class="built_in">UIApplication</span> sharedApplication] openURL:[<span class="built_in">NSURL</span> URLWithString:<span class="built_in">UIApplicationOpenSettingsURLString</span>]];</span><br><span class="line"><span class="comment">//如果App没有添加权限，显示的是设定界面。如果App有添加权限（例如通知），显示的是App的设定界面。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//iOS8之前</span></span><br><span class="line"><span class="comment">//先添加一个url type如下图，在代码中调用如下代码,即可跳转到设置页面的对应项</span></span><br><span class="line">[[<span class="built_in">UIApplication</span> sharedApplication] openURL:[<span class="built_in">NSURL</span> URLWithString:<span class="string">@"prefs:root=WIFI"</span>]];</span><br><span class="line"></span><br><span class="line">可选值如下：</span><br><span class="line">About — prefs:root=General&amp;path=About</span><br><span class="line">Accessibility — prefs:root=General&amp;path=ACCESSIBILITY</span><br><span class="line">Airplane Mode On — prefs:root=AIRPLANE_MODE</span><br><span class="line">Auto-Lock — prefs:root=General&amp;path=AUTOLOCK</span><br><span class="line">Brightness — prefs:root=Brightness</span><br><span class="line">Bluetooth — prefs:root=General&amp;path=Bluetooth</span><br><span class="line">Date &amp; Time — prefs:root=General&amp;path=DATE_AND_TIME</span><br><span class="line">FaceTime — prefs:root=FACETIME</span><br><span class="line">General — prefs:root=General</span><br><span class="line">Keyboard — prefs:root=General&amp;path=Keyboard</span><br><span class="line">iCloud — prefs:root=<span class="built_in">CASTLE</span></span><br><span class="line">iCloud Storage &amp; Backup — prefs:root=<span class="built_in">CASTLE</span>&amp;path=STORAGE_AND_BACKUP</span><br><span class="line">International — prefs:root=General&amp;path=INTERNATIONAL</span><br><span class="line">Location Services — prefs:root=LOCATION_SERVICES</span><br><span class="line">Music — prefs:root=MUSIC</span><br><span class="line">Music Equalizer — prefs:root=MUSIC&amp;path=EQ</span><br><span class="line">Music Volume Limit — prefs:root=MUSIC&amp;path=VolumeLimit</span><br><span class="line">Network — prefs:root=General&amp;path=Network</span><br><span class="line">Nike + iPod — prefs:root=NIKE_PLUS_IPOD</span><br><span class="line">Notes — prefs:root=NOTES</span><br><span class="line">Notification — prefs:root=NOTIFICATI*****_ID</span><br><span class="line">Phone — prefs:root=Phone</span><br><span class="line">Photos — prefs:root=Photos</span><br><span class="line">Profile — prefs:root=General&amp;path=ManagedConfigurationList</span><br><span class="line">Reset — prefs:root=General&amp;path=Reset</span><br><span class="line">Safari — prefs:root=Safari</span><br><span class="line">Siri — prefs:root=General&amp;path=Assistant</span><br><span class="line">Sounds — prefs:root=Sounds</span><br><span class="line">Software Update — prefs:root=General&amp;path=SOFTWARE_UPDATE_LINK</span><br><span class="line">Store — prefs:root=STORE</span><br><span class="line">Twitter — prefs:root=TWITTER</span><br><span class="line">Usage — prefs:root=General&amp;path=USAGE</span><br><span class="line">VPN — prefs:root=General&amp;path=Network/VPN</span><br><span class="line">Wallpaper — prefs:root=Wallpaper</span><br><span class="line">Wi-Fi — prefs:root=WIFI</span><br></pre></td></tr></table></figure>
<h3 id="iOS开发中的一些相关路径"><a href="#iOS开发中的一些相关路径" class="headerlink" title="iOS开发中的一些相关路径"></a>iOS开发中的一些相关路径</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">模拟器的位置:</span><br><span class="line">/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs </span><br><span class="line"></span><br><span class="line">文档安装位置:</span><br><span class="line">/Applications/Xcode.app/Contents/Developer/Documentation/DocSets</span><br><span class="line"></span><br><span class="line">插件保存路径:</span><br><span class="line">~/Library/ApplicationSupport/Developer/Shared/Xcode/Plug-ins</span><br><span class="line"></span><br><span class="line">自定义代码段的保存路径:</span><br><span class="line">~/Library/Developer/Xcode/UserData/CodeSnippets/ </span><br><span class="line">如果找不到CodeSnippets文件夹，可以自己新建一个CodeSnippets文件夹。</span><br><span class="line"></span><br><span class="line">描述文件路径</span><br><span class="line">~/Library/MobileDevice/Provisioning Profiles</span><br></pre></td></tr></table></figure>
<h3 id="匹配block的正则表达式"><a href="#匹配block的正则表达式" class="headerlink" title="匹配block的正则表达式"></a>匹配block的正则表达式</h3><p><a href="http://www.regexr.com/" target="_blank" rel="noopener">正则表达式检测</a></p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 解释：以`^`开头，`&#123;`和`换行符`结束，中间（`*`表示匹配0次或多次，`+`表示匹配一次或者多次）匹配任意字符，最后是换行符</span></span><br><span class="line">\^.*\&#123;\n</span><br></pre></td></tr></table></figure>
<h3 id="ARC-下打印retainCount（引用计数）"><a href="#ARC-下打印retainCount（引用计数）" class="headerlink" title="ARC 下打印retainCount（引用计数）"></a>ARC 下打印retainCount（引用计数）</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// obj目标对象</span></span><br><span class="line"><span class="built_in">NSInteger</span> retainCount = <span class="built_in">CFGetRetainCount</span>((__bridge <span class="built_in">CFTypeRef</span>)obj);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"Retain count is %ld"</span>, retainCount);</span><br></pre></td></tr></table></figure>
<h3 id="系统隐藏的调试工具类-UIDebuggingInformationOverlay"><a href="#系统隐藏的调试工具类-UIDebuggingInformationOverlay" class="headerlink" title="系统隐藏的调试工具类 UIDebuggingInformationOverlay"></a>系统隐藏的调试工具类 <code>UIDebuggingInformationOverlay</code></h3><blockquote>
<p>Reference: <a href="http://ryanipete.com/blog/ios/swift/objective-c/uidebugginginformationoverlay/" target="_blank" rel="noopener">http://ryanipete.com/blog/ios/swift/objective-c/uidebugginginformationoverlay/</a><br>1、Call <code>[UIDebuggingInformationOverlay prepareDebuggingOverlay]</code> - I’m not sure exactly what this method does, but the overlay will be empty if you don’t call it.<br>2、Call <code>[[UIDebuggingInformationOverlay overlay] toggleVisibility]</code> - This shows the overlay window (assuming it’s not already visible).</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// Objective-C</span></span><br><span class="line">- (<span class="keyword">void</span>)debug &#123;</span><br><span class="line"><span class="meta">#if DEBUG</span></span><br><span class="line">    Class aClass = objc_getClass(<span class="string">"UIDebuggingInformationOverlay"</span>);</span><br><span class="line">    ((<span class="keyword">void</span> (*) (<span class="keyword">id</span>, SEL))(<span class="keyword">void</span> *)objc_msgSend) ((<span class="keyword">id</span>)aClass, sel_registerName(<span class="string">"prepareDebuggingOverlay"</span>));</span><br><span class="line">    <span class="keyword">id</span> returnInstance = ((<span class="keyword">id</span> (*) (<span class="keyword">id</span>, SEL))(<span class="keyword">void</span> *)objc_msgSend) ((<span class="keyword">id</span>)aClass, sel_registerName(<span class="string">"overlay"</span>));</span><br><span class="line">    <span class="comment">// 下面这个方法是可选的，可以不调用，因为直接两个手指点击状态栏就可以调出调试工具</span></span><br><span class="line">    ((<span class="keyword">void</span>* (*) (<span class="keyword">id</span>, SEL))(<span class="keyword">void</span> *)objc_msgSend) ((<span class="keyword">id</span>)returnInstance, sel_registerName(<span class="string">"toggleVisibility"</span>));</span><br><span class="line"><span class="meta">#endif</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// Swift</span></span><br><span class="line"><span class="keyword">let</span> overlayClass = <span class="type">NSClassFromString</span>(<span class="string">"UIDebuggingInformationOverlay"</span>) <span class="keyword">as</span>? <span class="type">UIWindow</span>.<span class="type">Type</span></span><br><span class="line"><span class="number">_</span> = overlayClass?.perform(<span class="type">NSSelectorFromString</span>(<span class="string">"prepareDebuggingOverlay"</span>))</span><br><span class="line"><span class="keyword">let</span> overlay = overlayClass?.perform(<span class="type">NSSelectorFromString</span>(<span class="string">"overlay"</span>)).takeUnretainedValue() <span class="keyword">as</span>? <span class="type">UIWindow</span></span><br><span class="line"><span class="number">_</span> = overlay?.perform(<span class="type">NSSelectorFromString</span>(<span class="string">"toggleVisibility"</span>))</span><br></pre></td></tr></table></figure>
<h3 id="快速生成以实例变量名称作为key-变量作为value的字典"><a href="#快速生成以实例变量名称作为key-变量作为value的字典" class="headerlink" title="快速生成以实例变量名称作为key,变量作为value的字典"></a>快速生成以实例变量名称作为<code>key</code>,变量作为<code>value</code>的字典</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSString</span> *packId    = <span class="string">@"zero"</span>;</span><br><span class="line"><span class="built_in">NSNumber</span> *userId    = @(<span class="number">22</span>);</span><br><span class="line"><span class="built_in">NSArray</span> *proxyTypes = @[<span class="string">@"int"</span>, <span class="string">@"string"</span>, <span class="string">@"double"</span>];</span><br><span class="line"><span class="built_in">NSDictionary</span> *param = <span class="built_in">NSDictionaryOfVariableBindings</span>(packId, userId, proxyTypes);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, param);</span><br><span class="line"></span><br><span class="line">&lt;=&gt; 等价于</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSDictionary</span> *param = @&#123;</span><br><span class="line">    <span class="string">@"packId"</span> : packId,</span><br><span class="line">    <span class="string">@"userId"</span> : userId,</span><br><span class="line">    <span class="string">@"proxyTypes"</span> : @[<span class="string">@"int"</span>, <span class="string">@"string"</span>, <span class="string">@"double"</span>]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="函数和消息代替performSelector："><a href="#函数和消息代替performSelector：" class="headerlink" title="函数和消息代替performSelector："></a>函数和消息代替<code>performSelector：</code></h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!obj) &#123; <span class="keyword">return</span>; &#125;</span><br><span class="line">SEL selector = <span class="built_in">NSSelectorFromString</span>(<span class="string">@"aMethod"</span>);</span><br><span class="line">IMP imp = [obj methodForSelector:selector];</span><br><span class="line"><span class="keyword">void</span> (*func)(<span class="keyword">id</span>, SEL) = (<span class="keyword">void</span> *)imp;</span><br><span class="line">func(obj, selector);</span><br><span class="line"></span><br><span class="line"><span class="comment">//----------- or ----------------------</span></span><br><span class="line">SEL selector = <span class="built_in">NSSelectorFromString</span>(<span class="string">@"aMethod"</span>);</span><br><span class="line">((<span class="keyword">void</span> (*)(<span class="keyword">id</span>, SEL))[obj methodForSelector:selector])(obj, selector);</span><br><span class="line"></span><br><span class="line"><span class="comment">//----------- or ----------------------</span></span><br><span class="line"><span class="comment">//代码块：((&lt;#ReturnClass#&gt; (*) (id, SEL, &lt;#ParameterClass, ...#&gt;))(void *)objc_msgSend) ((id)&lt;#self#&gt;, sel_registerName(&lt;#const char *str#&gt;), &lt;#Parameters, ...#&gt;);</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;objc/message.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">((<span class="keyword">void</span>(*)(<span class="keyword">id</span>, SEL, <span class="keyword">id</span>, <span class="keyword">int</span>, <span class="built_in">BOOL</span>))objc_msgSend)(ot, sel_registerName(<span class="string">"A:B:C:"</span>), value_1, value_2, value_3);</span><br></pre></td></tr></table></figure>
<h3 id="生成随机小数-0-1之间"><a href="#生成随机小数-0-1之间" class="headerlink" title="生成随机小数(0-1之间)"></a>生成随机小数(0-1之间)</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#define ARC4RANDOM_MAX      0x100000000</span></span><br><span class="line"><span class="keyword">double</span> val = ((<span class="keyword">double</span>)arc4random() / ARC4RANDOM_MAX);</span><br></pre></td></tr></table></figure>
<h3 id="正确使用NSArray和NSDictionary的方式"><a href="#正确使用NSArray和NSDictionary的方式" class="headerlink" title="正确使用NSArray和NSDictionary的方式"></a>正确使用<code>NSArray</code>和<code>NSDictionary</code>的方式</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// ok</span></span><br><span class="line">  <span class="built_in">NSArray</span> *array = [<span class="built_in">NSArray</span> arrayWithArray:<span class="literal">nil</span>];</span><br><span class="line">  <span class="built_in">NSLog</span>(<span class="string">@"array = %@"</span>, array); <span class="comment">// output @[]</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">NSMutableDictionary</span> *mutDict1 = [<span class="built_in">NSMutableDictionary</span> dictionary];</span><br><span class="line">  <span class="built_in">NSString</span> *nilString = <span class="literal">nil</span>;</span><br><span class="line">  <span class="comment">// crash</span></span><br><span class="line">  <span class="comment">//[mutDict1 setObject:nil forKey:@"key"];</span></span><br><span class="line">  <span class="comment">//mutDict1[nilString] = @"11000";</span></span><br><span class="line">  <span class="comment">// ok</span></span><br><span class="line">  [mutDict1 setValue:nilString forKeyPath:<span class="string">@"key"</span>];</span><br><span class="line">  <span class="comment">// ok</span></span><br><span class="line">  mutDict1[<span class="string">@"keykey"</span>] = <span class="literal">nil</span>;</span><br><span class="line">  <span class="comment">// ok</span></span><br><span class="line">  <span class="keyword">id</span> valueXX = [mutDict1 objectForKey:nilString];</span><br><span class="line">  <span class="comment">// ok</span></span><br><span class="line">  <span class="keyword">id</span> valueYY = mutDict1[nilString];</span><br><span class="line">  <span class="built_in">NSLog</span>(<span class="string">@"xxx = %@"</span>, valueXX); <span class="comment">// output null</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// ok</span></span><br><span class="line">  <span class="built_in">NSMutableDictionary</span> *mutDict2 = [<span class="built_in">NSMutableDictionary</span> dictionaryWithObjectsAndKeys:<span class="literal">nil</span>, <span class="string">@"key"</span>, <span class="literal">nil</span>];     <span class="comment">//output @[]</span></span><br><span class="line">  <span class="comment">// crash</span></span><br><span class="line">  <span class="comment">//mutDict2 = [NSMutableDictionary dictionaryWithObjectsAndKeys:@"value", nil, nil];</span></span><br><span class="line">  <span class="comment">// crash </span></span><br><span class="line">  <span class="comment">//mutDict2 = @&#123;@"key" : nilString&#125;.mutableCopy;</span></span><br><span class="line">  <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, mutDict2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="iOS-常用数学函数"><a href="#iOS-常用数学函数" class="headerlink" title="iOS 常用数学函数"></a>iOS 常用数学函数</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、 三角函数 </span><br><span class="line">　　<span class="keyword">double</span> sin (<span class="keyword">double</span>);正弦 </span><br><span class="line">　　<span class="keyword">double</span> cos (<span class="keyword">double</span>);余弦 </span><br><span class="line">　　<span class="keyword">double</span> tan (<span class="keyword">double</span>);正切 </span><br><span class="line">　　<span class="number">2</span> 、反三角函数 </span><br><span class="line">　　<span class="keyword">double</span> asin (<span class="keyword">double</span>); 结果介于[-PI/<span class="number">2</span>, PI/<span class="number">2</span>] </span><br><span class="line">　　<span class="keyword">double</span> acos (<span class="keyword">double</span>); 结果介于[<span class="number">0</span>, PI] </span><br><span class="line">　　<span class="keyword">double</span> atan (<span class="keyword">double</span>); 反正切(主值), 结果介于[-PI/<span class="number">2</span>, PI/<span class="number">2</span>] </span><br><span class="line">　　<span class="keyword">double</span> atan2 (<span class="keyword">double</span>, <span class="keyword">double</span>); 反正切(整圆值), 结果介于[-PI, PI] </span><br><span class="line">　　<span class="number">3</span> 、双曲三角函数 </span><br><span class="line">　　<span class="keyword">double</span> sinh (<span class="keyword">double</span>); </span><br><span class="line">　　<span class="keyword">double</span> cosh (<span class="keyword">double</span>); </span><br><span class="line">　　<span class="keyword">double</span> tanh (<span class="keyword">double</span>); </span><br><span class="line">　　<span class="number">4</span> 、指数与对数 </span><br><span class="line">　　<span class="keyword">double</span> exp (<span class="keyword">double</span>);求取自然数e的幂 </span><br><span class="line">　　<span class="keyword">double</span> sqrt (<span class="keyword">double</span>);开平方 </span><br><span class="line">　　<span class="keyword">double</span> log (<span class="keyword">double</span>); 以e为底的对数 </span><br><span class="line">　　<span class="keyword">double</span> log10 (<span class="keyword">double</span>);以<span class="number">10</span>为底的对数 </span><br><span class="line">　　<span class="keyword">double</span> pow(<span class="keyword">double</span> x, <span class="keyword">double</span> y）;计算以x为底数的y次幂 </span><br><span class="line">　　<span class="keyword">float</span> powf(<span class="keyword">float</span> x, <span class="keyword">float</span> y); 功能与pow一致，只是输入与输出皆为浮点数 </span><br><span class="line">　　<span class="number">5</span> 、取整 </span><br><span class="line">　　<span class="keyword">double</span> ceil (<span class="keyword">double</span>); 取上整 </span><br><span class="line">　　<span class="keyword">double</span> floor (<span class="keyword">double</span>); 取下整 </span><br><span class="line">　　<span class="number">6</span> 、绝对值 </span><br><span class="line">　　<span class="keyword">double</span> fabs (<span class="keyword">double</span>);求绝对值 </span><br><span class="line">　　<span class="keyword">double</span> cabs(<span class="keyword">struct</span> complex znum) ;求复数的绝对值 </span><br><span class="line">　　<span class="number">7</span> 、标准化浮点数 </span><br><span class="line">　　<span class="keyword">double</span> frexp (<span class="keyword">double</span> f, <span class="keyword">int</span> *p); 标准化浮点数, f = x * <span class="number">2</span>^p, 已知f求x, p ( x介于[<span class="number">0.5</span>, <span class="number">1</span>] ) </span><br><span class="line">　　<span class="keyword">double</span> ldexp (<span class="keyword">double</span> x, <span class="keyword">int</span> p); 与frexp相反, 已知x, p求f </span><br><span class="line">　　<span class="number">8</span> 、取整与取余 </span><br><span class="line">　　<span class="keyword">double</span> modf (<span class="keyword">double</span>, <span class="keyword">double</span>*); 将参数的整数部分通过指针回传, 返回小数部分 </span><br><span class="line">　　<span class="keyword">double</span> fmod (<span class="keyword">double</span>, <span class="keyword">double</span>); 返回两参数相除的余数 </span><br><span class="line">　　<span class="number">9</span> 、其他 </span><br><span class="line">　　<span class="keyword">double</span> hypot(<span class="keyword">double</span> x, <span class="keyword">double</span> y);已知直角三角形两个直角边长度，求斜边长度 </span><br><span class="line">　　<span class="keyword">double</span> ldexp(<span class="keyword">double</span> x, <span class="keyword">int</span> exponent);计算x*(<span class="number">2</span>的exponent次幂) </span><br><span class="line">　　<span class="keyword">double</span> poly(<span class="keyword">double</span> x, <span class="keyword">int</span> degree, <span class="keyword">double</span> coeffs [] );计算多项式 </span><br><span class="line">　　nt matherr(<span class="keyword">struct</span> exception *e);数学错误计算处理程序</span><br></pre></td></tr></table></figure>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ul>
<li><a href="http://www.jianshu.com/p/4523eafb4cd4" target="_blank" rel="noopener">iOS小技巧总结</a>  </li>
<li><a href="http://www.tuicool.com/articles/2Ynmui2" target="_blank" rel="noopener">多年iOS开发经验总结(二)</a></li>
</ul>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="true">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        <li title='0' data-url='http://www.170mv.com/kw/other.web.ra01.sycdn.kuwo.cn/resource/n2/2011/06/22/3886405066.mp3'></li>
                    
                        <li title='1' data-url='http://www.170mv.com/kw/other.web.rm01.sycdn.kuwo.cn/resource/n3/58/22/824962420.mp3'></li>
                    
                        <li title='2' data-url='http://www.170mv.com/kw/other.web.rm01.sycdn.kuwo.cn/resource/n2/46/8/2541300031.mp3'></li>
                    
                        <li title='3' data-url='http://www.170mv.com/kw/other.web.ra01.sycdn.kuwo.cn/resource/n1/128/70/3/1239173815.mp3'></li>
                    
                        <li title='4' data-url='https://891622172.wodemo.com/down/20180828/218041/%E5%91%A8%E6%9D%B0%E4%BC%A6+-+%E9%BB%84%E9%87%91%E7%94%B2.mp3'></li>
                    
                        <li title='5' data-url='http://other.web.re01.sycdn.kuwo.cn/resource/n2/78/26/557358862.mp3'></li>
                    
                        <li title='6' data-url='http://www.170mv.com/kw/other.web.rl01.sycdn.kuwo.cn/resource/n3/12/75/3969672477.mp3'></li>
                    
                        <li title='7' data-url='http://www.170mv.com/kw/other.web.rg01.sycdn.kuwo.cn/resource/n1/82/58/2383694774.mp3'></li>
                    
                        <li title='8' data-url='http://www.170mv.com/kw/rd01.sycdn.kuwo.cn/resource/n2/31/27/3607457927.mp3'></li>
                    
                        <li title='9' data-url='http://www.170mv.com/kw/other.web.ra01.sycdn.kuwo.cn/resource/n1/128/85/83/3499520104.mp3'></li>
                    
                        <li title='10' data-url='http://www.170mv.com/kw/other.web.rn01.sycdn.kuwo.cn/resource/n2/89/30/2262792667.mp3'></li>
                    
                        <li title='11' data-url='http://www.170mv.com/kw/other.web.ri01.sycdn.kuwo.cn/resource/n2/87/60/3067312003.mp3'></li>
                    
                        <li title='12' data-url='http://www.170mv.com/kw/other.web.rl01.sycdn.kuwo.cn/resource/n2/11/66/703757030.mp3'></li>
                    
                        <li title='13' data-url='http://www.170mv.com/kw/other.web.ri01.sycdn.kuwo.cn/resource/n2/79/84/580425099.mp3'></li>
                    
                        <li title='14' data-url='http://67.159.62.2/anime_ost/naruto-shippuuden-ed07-single-long-kiss-good-bye/vvflvshi/01.%20Long%20Kiss%20God%20Bye.mp3'></li>
                    
                </ul>
            
        </div>
        
    <div id='gitalk-container' class="comment link"
        data-ae='true'
        data-ci='763f906863260a462bc4'
        data-cs='b09ecb713d7df4fdbd123fe84b9f71e077d50b95'
        data-r='faimin.github.io'
        data-o='faimin'
        data-a='faimin'
        data-d='false'
    >查看评论</div>


    </div>
    
        <div class='side'>
            <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#UITableView-plain样式下，让section跟随滑动"><span class="toc-number">1.</span> <span class="toc-text">UITableView plain样式下，让section跟随滑动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#设置tableViewCell之间的分割线"><span class="toc-number">2.</span> <span class="toc-text">设置tableViewCell之间的分割线</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#设置tableViewCell分割线的左右边距"><span class="toc-number">3.</span> <span class="toc-text">设置tableViewCell分割线的左右边距</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改UITableviewCell-imageView的大小"><span class="toc-number">4.</span> <span class="toc-text">修改UITableviewCell.imageView的大小</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#判断某一行cell是否已经显示"><span class="toc-number">5.</span> <span class="toc-text">判断某一行cell是否已经显示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#打开或禁用UIView的复制、选择、全选等功能"><span class="toc-number">6.</span> <span class="toc-text">打开或禁用UIView的复制、选择、全选等功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#让UIView支持Autolayout计算高度"><span class="toc-number">7.</span> <span class="toc-text">让UIView支持Autolayout计算高度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#为NavigationBar设置titleView"><span class="toc-number">8.</span> <span class="toc-text">为NavigationBar设置titleView</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#手动更改iOS状态栏颜色"><span class="toc-number">9.</span> <span class="toc-text">手动更改iOS状态栏颜色</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#更改状态栏的类型"><span class="toc-number">10.</span> <span class="toc-text">更改状态栏的类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#禁用UIButton的高亮状态"><span class="toc-number">11.</span> <span class="toc-text">禁用UIButton的高亮状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#判断view是不是指定视图的子视图"><span class="toc-number">12.</span> <span class="toc-text">判断view是不是指定视图的子视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#判断viewController是disappear还是dealloc"><span class="toc-number">13.</span> <span class="toc-text">判断viewController是disappear还是dealloc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#判断当前viewController是push进来的还是present进来的"><span class="toc-number">14.</span> <span class="toc-text">判断当前viewController是push进来的还是present进来的</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改UItextField中placeholder的文字颜色"><span class="toc-number">15.</span> <span class="toc-text">修改UItextField中placeholder的文字颜色</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UITextField光标右移"><span class="toc-number">16.</span> <span class="toc-text">UITextField光标右移</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UITextField文字周围增加边距"><span class="toc-number">17.</span> <span class="toc-text">UITextField文字周围增加边距</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#直接设置UITextView的placeholder"><span class="toc-number">18.</span> <span class="toc-text">直接设置UITextView的placeholder</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#动态调整-UITextView-的高度"><span class="toc-number">19.</span> <span class="toc-text">动态调整 UITextView 的高度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#当UITextView-UITextField中没有文字时，禁用回车键"><span class="toc-number">20.</span> <span class="toc-text">当UITextView/UITextField中没有文字时，禁用回车键</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#动画修改UILabel上的文字"><span class="toc-number">21.</span> <span class="toc-text">动画修改UILabel上的文字</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#计算UILabel上某段文字的frame"><span class="toc-number">22.</span> <span class="toc-text">计算UILabel上某段文字的frame</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#取消隐式动画"><span class="toc-number">23.</span> <span class="toc-text">取消隐式动画</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#动画暂停和重新开始"><span class="toc-number">24.</span> <span class="toc-text">动画暂停和重新开始</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Pop动画"><span class="toc-number">25.</span> <span class="toc-text">Pop动画</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Autolayout动画"><span class="toc-number">26.</span> <span class="toc-text">Autolayout动画</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#去掉导航栏返回按钮的back标题"><span class="toc-number">27.</span> <span class="toc-text">去掉导航栏返回按钮的back标题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#调整barButtonItem之间的距离"><span class="toc-number">28.</span> <span class="toc-text">调整barButtonItem之间的距离</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#解决自定义返回按钮导致手势返回失败的问题"><span class="toc-number">29.</span> <span class="toc-text">解决自定义返回按钮导致手势返回失败的问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#全屏手势返回"><span class="toc-number">30.</span> <span class="toc-text">全屏手势返回</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#从一个隐藏导航栏的-A-控制器-push-到一个有导航栏的-B-控制器中-导航栏隐藏问题"><span class="toc-number">31.</span> <span class="toc-text">从一个隐藏导航栏的 A 控制器 push 到一个有导航栏的 B 控制器中(导航栏隐藏问题)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#页面跳转时翻转动画"><span class="toc-number">32.</span> <span class="toc-text">页面跳转时翻转动画</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#以modal样式进行push跳转"><span class="toc-number">33.</span> <span class="toc-text">以modal样式进行push跳转</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Dispatch-Source方式调整进度"><span class="toc-number">34.</span> <span class="toc-text">Dispatch Source方式调整进度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#本地推送"><span class="toc-number">35.</span> <span class="toc-text">本地推送</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#禁止锁屏"><span class="toc-number">36.</span> <span class="toc-text">禁止锁屏</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#退出应用"><span class="toc-number">37.</span> <span class="toc-text">退出应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取手机安装的应用"><span class="toc-number">38.</span> <span class="toc-text">获取手机安装的应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#打开系统设置界面"><span class="toc-number">39.</span> <span class="toc-text">打开系统设置界面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#iOS开发中的一些相关路径"><span class="toc-number">40.</span> <span class="toc-text">iOS开发中的一些相关路径</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#匹配block的正则表达式"><span class="toc-number">41.</span> <span class="toc-text">匹配block的正则表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ARC-下打印retainCount（引用计数）"><span class="toc-number">42.</span> <span class="toc-text">ARC 下打印retainCount（引用计数）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#系统隐藏的调试工具类-UIDebuggingInformationOverlay"><span class="toc-number">43.</span> <span class="toc-text">系统隐藏的调试工具类 UIDebuggingInformationOverlay</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#快速生成以实例变量名称作为key-变量作为value的字典"><span class="toc-number">44.</span> <span class="toc-text">快速生成以实例变量名称作为key,变量作为value的字典</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数和消息代替performSelector："><span class="toc-number">45.</span> <span class="toc-text">函数和消息代替performSelector：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#生成随机小数-0-1之间"><span class="toc-number">46.</span> <span class="toc-text">生成随机小数(0-1之间)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#正确使用NSArray和NSDictionary的方式"><span class="toc-number">47.</span> <span class="toc-text">正确使用NSArray和NSDictionary的方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#iOS-常用数学函数"><span class="toc-number">48.</span> <span class="toc-text">iOS 常用数学函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#参考："><span class="toc-number">49.</span> <span class="toc-text">参考：</span></a></li></ol>
        </div>
    
</div>


    </div>
</div>
</body>
<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/diaspora.js"></script>
<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">
<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>




</html>